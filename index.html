<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perth Trip 2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #1a73e8; /* Google Blue */
            --green: #188038;   /* Google Green */
            --bg: #f8f9fa;
        }
        body { background: var(--bg); font-family: 'Roboto', 'Segoe UI', sans-serif; padding-bottom: 100px; }
        
        /* Nav Scroller */
        .nav-scroller {
            background: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 12px 0;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            overflow-x: auto;
            white-space: nowrap;
        }
        .nav-btn {
            border: 1px solid #dadce0;
            background: #fff;
            padding: 8px 16px;
            border-radius: 100px;
            margin: 0 4px;
            font-size: 0.9rem;
            color: #5f6368;
            font-weight: 500;
            transition: all 0.2s;
        }
        .nav-btn.active {
            background: #e8f0fe;
            color: var(--primary);
            border-color: var(--primary);
        }
        .nav-btn strong { display: block; font-size: 0.75rem; }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 20px 0 20px 20px;
            max-width: 700px;
            margin: 0 auto;
        }
        .timeline-item {
            position: relative;
            padding-bottom: 40px;
            border-left: 2px solid #dadce0;
            padding-left: 30px;
        }
        .timeline-item:last-child { border-left: transparent; }
        
        .timeline-dot {
            position: absolute;
            left: -9px;
            top: 0;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            border: 4px solid var(--primary);
        }

        /* Cards */
        .activity-card {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 1px 2px rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
        }
        
        /* Links */
        .place-link {
            text-decoration: none;
            color: #202124;
            font-weight: 700;
            font-size: 1.1rem;
            display: inline-flex;
            align-items: center;
        }
        .place-link:hover { color: var(--primary); text-decoration: underline; }
        .place-link i { font-size: 0.7em; margin-left: 8px; color: var(--primary); opacity: 0.7; }

        /* Navigation Button (Green) */
        .nav-action-btn {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: white;
            color: var(--green);
            border: 1px solid #dadce0;
            padding: 10px 16px;
            border-radius: 24px;
            margin-top: 12px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.85rem;
            transition: background 0.2s;
        }
        .nav-action-btn:hover { background-color: #f1f8f1; }
        .nav-action-btn i { font-size: 1.1em; }

        /* Badges */
        .time-badge { background: #e8f0fe; color: var(--primary); padding: 2px 6px; border-radius: 4px; font-size: 0.75rem; font-weight: 700; }
        .rating-badge { color: #f9ab00; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="nav-scroller text-center">
    <div class="d-inline-flex px-3" id="nav-container"></div>
</div>

<div class="container mt-4">
    <div id="day-header" class="text-center mb-4"></div>
    <div class="timeline" id="timeline-container"></div>
</div>

<script>
    // DATA: Note that 'loc' is now very specific to ensure Google Maps finds the correct place.
    const itinerary = [
        {
            day: 1, date: "Sat, 20 Dec", title: "Arrival & CBD",
            steps: [
                { time: "06:55", title: "Perth Airport", desc: "Arrive CX143. Collect Car.", loc: "Perth Airport WA" },
                { time: "AM", title: "Four Points by Sheraton Perth", desc: "Check-in", loc: "Four Points by Sheraton Perth" },
                { time: "Mid-day", title: "Elizabeth Quay", desc: "Stroll riverside", loc: "Elizabeth Quay Perth" },
                { time: "Lunch", title: "SIMPLE Italian Cucina", desc: "Pizza & Views", rating: "4.7", loc: "SIMPLE Italian Cucina Pizzeria Perth" },
                { time: "PM", title: "The Perth Mint", desc: "Gold Pouring", loc: "The Perth Mint Australia" },
                { time: "Evening", title: "Four Points by Sheraton Perth", desc: "Rest", loc: "Four Points by Sheraton Perth" }
            ]
        },
        {
            day: 2, date: "Sun, 21 Dec", title: "Perth → Kalbarri",
            steps: [
                { time: "08:00", title: "Four Points by Sheraton Perth", desc: "Depart Hotel", loc: "Four Points by Sheraton Perth" },
                { time: "09:30", title: "Lancelin Sand Dunes", desc: "Sandboarding", loc: "Lancelin Sand Dunes WA" },
                { time: "11:30", title: "Lobster Shack Cervantes", desc: "Seafood Lunch [Booked]", rating: "4.5", loc: "Lobster Shack Cervantes WA" },
                { time: "13:05", title: "Grigson's Lookout", desc: "Views", loc: "Grigson's Lookout Jurien Bay" },
                { time: "15:00", title: "Leaning Tree Greenough", desc: "Photo Stop", loc: "Leaning Tree Greenough WA" },
                { time: "17:40", title: "Nature's Window", desc: "Kalbarri National Park", loc: "Nature's Window Kalbarri" },
                { time: "19:30", title: "Kalbarri Edge Resort", desc: "Check-in & Dinner", loc: "Kalbarri Edge Resort" }
            ]
        },
        {
            day: 3, date: "Mon, 22 Dec", title: "Kalbarri → Perth",
            steps: [
                { time: "08:00", title: "The Pelican Cafe", desc: "Breakfast", loc: "The Pelican Cafe Kalbarri" },
                { time: "09:25", title: "Blue Holes", desc: "Rock pools", loc: "Blue Holes Kalbarri" },
                { time: "10:00", title: "Kalbarri Airport", desc: "Pink Lake Flight", loc: "Kalbarri Airport" },
                { time: "11:45", title: "Golden Wok Kalbarri", desc: "Lunch", loc: "Golden Wok Kalbarri" },
                { time: "12:30", title: "Pot Alley", desc: "Cliffs Photo", loc: "Pot Alley Kalbarri" },
                { time: "14:00", title: "Hutt Lagoon", desc: "Pink Lake Lookout", loc: "Hutt Lagoon WA" },
                { time: "18:00", title: "Sea Breeze Cafe", desc: "Dinner (Takeaway)", loc: "Sea Breeze Cafe Cervantes" },
                { time: "18:45", title: "The Pinnacles Desert", desc: "Sunset", loc: "The Pinnacles Desert Discovery Centre" },
                { time: "21:30", title: "Four Points by Sheraton Perth", desc: "Return Hotel", loc: "Four Points by Sheraton Perth" }
            ]
        },
        {
            day: 4, date: "Tue, 23 Dec", title: "Rottnest Island",
            steps: [
                { time: "09:00", title: "B Shed Fremantle", desc: "Ferry Terminal", loc: "B Shed Fremantle" },
                { time: "10:30", title: "Rottnest Island Bakery", desc: "Lunch & Quokkas", loc: "Rottnest Bakery" },
                { time: "Sightseeing", title: "Parker Point", desc: "Views (Island Bus)", loc: "Parker Point Rottnest" },
                { time: "Sightseeing", title: "Wadjemup Lighthouse", desc: "Island Bus", loc: "Wadjemup Lighthouse" },
                { time: "17:00", title: "B Shed Fremantle", desc: "Return Ferry", loc: "B Shed Fremantle" },
                { time: "18:00", title: "Balthazar Restaurant", desc: "Dinner CBD [Booked]", rating: "4.6", loc: "Balthazar Restaurant Perth" }
            ]
        },
        {
            day: 5, date: "Wed, 24 Dec", title: "Wildlife & Swan Valley",
            steps: [
                { time: "08:30", title: "Caversham Wildlife Park", desc: "Koalas", loc: "Caversham Wildlife Park" },
                { time: "PM", title: "Margaret River Chocolate Co", desc: "Tastings", loc: "The Margaret River Chocolate Company Swan Valley" },
                { time: "PM", title: "The House of Honey", desc: "Tastings", loc: "The House of Honey Swan Valley" },
                { time: "18:00", title: "KARLA Place of Fire", desc: "Dinner [Booked]", rating: "4.8", loc: "KARLA Place of Fire" },
                { time: "19:45", title: "Yagan Square", desc: "Xmas Lights", loc: "Yagan Square Perth" }
            ]
        },
        {
            day: 6, date: "Thu, 25 Dec", title: "Christmas Day",
            steps: [
                { time: "AM", title: "Kings Park", desc: "Botanic Garden", loc: "Kings Park and Botanic Garden" },
                { time: "Photo", title: "Blue Boat House", desc: "Photo Stop", loc: "Blue Boat House Perth" },
                { time: "PM", title: "Cottesloe Beach", desc: "Relax", loc: "Cottesloe Beach" }
            ]
        },
        {
            day: 7, date: "Fri, 26 Dec", title: "Busselton & Mandurah",
            steps: [
                { time: "09:00", title: "Giants of Mandurah", desc: "Sculpture", loc: "Giant of Mandurah Yaburgurt Winjan" },
                { time: "10:00", title: "Mandurah Cruises", desc: "Pirate Ship", loc: "Mandurah Cruises" },
                { time: "13:00", title: "KYST", desc: "Lunch [Booked]", loc: "KYST Busselton" },
                { time: "15:00", title: "Busselton Jetty", desc: "Train & Observatory", loc: "Busselton Jetty" },
                { time: "18:40", title: "Lake Clifton", desc: "Thrombolites", loc: "Lake Clifton Thrombolites" },
                { time: "19:30", title: "Flics Kitchen", desc: "Dinner", loc: "Flics Kitchen Mandurah" }
            ]
        },
        {
            day: 8, date: "Sat, 27 Dec", title: "Fremantle",
            steps: [
                { time: "09:30", title: "Rainbow Container", desc: "Photo Stop", loc: "Rainbow Container Fremantle" },
                { time: "10:00", title: "Fremantle Markets", desc: "Browse", loc: "Fremantle Markets" },
                { time: "11:15", title: "WA Shipwrecks Museum", desc: "Museum", loc: "WA Shipwrecks Museum" },
                { time: "13:00", title: "The Cray Seafood", desc: "Lunch [Booked]", rating: "4.7", loc: "The Cray Seafood & Grill Fremantle" },
                { time: "14:45", title: "Glowing Rooms", desc: "Mini Golf", loc: "Glowing Rooms - 3D Mini Golf" },
                { time: "18:00", title: "Nunzio's Restaurant", desc: "Dinner", rating: "4.6", loc: "Nunzio's Restaurant" }
            ]
        },
        {
            day: 9, date: "Sun, 28 Dec", title: "Departure",
            steps: [
                { time: "08:30", title: "Perth Airport", desc: "Flight CX182", loc: "Perth Airport" }
            ]
        }
    ];

    function renderNav() {
        document.getElementById('nav-container').innerHTML = itinerary.map((day, idx) => `
            <button class="nav-btn ${idx === 0 ? 'active' : ''}" onclick="loadDay(${idx}, this)">
                <strong>Day ${day.day}</strong> ${day.date.split(',')[0]}
            </button>
        `).join('');
    }

    function loadDay(index, btnEl) {
        if(btnEl) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btnEl.classList.add('active');
        }
        
        const data = itinerary[index];
        document.getElementById('day-header').innerHTML = `<h4 class="fw-bold mb-0 text-dark">${data.title}</h4><small class="text-secondary">${data.date}</small>`;
        
        const container = document.getElementById('timeline-container');
        let html = '';

        data.steps.forEach(step => {
            // URL 1: The "Place" Link (Clicking the Title)
            // Uses /search/?api=1&query=Name to strictly find the place.
            const placeUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(step.loc)}`;
            
            // URL 2: The "Navigation" Link (Clicking the Green Button)
            // Uses /dir/?api=1&destination=Name (Origin defaults to "My Location")
            const navUrl = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(step.loc)}`;

            html += `
            <div class="timeline-item">
                <div class="timeline-dot"></div>
                <div class="activity-card">
                    <div class="d-flex justify-content-between align-items-center mb-1">
                        <span class="time-badge">${step.time}</span>
                        ${step.rating ? `<span class="rating-badge"><i class="fas fa-star"></i> ${step.rating}</span>` : ''}
                    </div>
                    
                    <!-- 1. Place Link -->
                    <a href="${placeUrl}" target="_blank" class="place-link">
                        ${step.title} <i class="fas fa-external-link-alt"></i>
                    </a>
                    
                    <p class="mb-2 text-secondary small">${step.desc}</p>
                    
                    <!-- 2. Navigation Button -->
                    ${step.loc ? `
                    <a href="${navUrl}" target="_blank" class="nav-action-btn">
                        <span><i class="fas fa-location-arrow me-2"></i>Navigate Here</span>
                        <small class="text-muted fw-normal">from my location</small>
                    </a>` : ''}
                </div>
            </div>`;
        });

        container.innerHTML = html;
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.addEventListener('DOMContentLoaded', () => {
        renderNav();
        loadDay(0);
    });
</script>

</body>
</html>